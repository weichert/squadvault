#!/usr/bin/env bash
set -euo pipefail

# scripts/py â€” canonical python shim (v1)
# Goals:
# - CWD-independent (safe under any working directory)
# - Deterministic tool selection (prefer python3, fallback to python)
# - Exec passthrough (propagate exit code)
repo_root="$(
  cd "$(dirname "$0")/.." >/dev/null 2>&1
  pwd
)"
cd "${repo_root}"

if command -v python3 >/dev/null 2>&1; then
  exec python3 "$@"
fi

if command -v python >/dev/null 2>&1; then
  exec python "$@"
fi

echo "ERROR: python3/python not found on PATH" >&2
exit 127
